<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´° | PhotoSession Connect</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* äºˆç´„ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .reservation-section {
            padding: 60px 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        
        .reservation-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .reservation-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .reservation-card h2 {
            color: #2d3748;
            font-size: 28px;
            margin-bottom: 20px;
        }
        
        .reservation-card p {
            color: #718096;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .btn-google-form {
            display: inline-block;
            padding: 20px 60px;
            background: linear-gradient(135deg, #ff6ec7, #3b82f6);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 110, 199, 0.3);
        }
        
        .btn-google-form:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 110, 199, 0.5);
        }
        
        .btn-google-form i {
            margin-right: 10px;
        }
        
        .availability-status {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .status-count strong {
            font-size: 24px;
            margin: 0 5px;
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="site-header">
        <div class="container">
            <h1 class="site-title">
                <a href="index.html">PhotoSession Connect</a>
            </h1>
            <nav class="site-nav">
                <a href="index.html">ãƒ›ãƒ¼ãƒ </a>
                <a href="events.html">ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§</a>
                <a href="#contact">ãŠå•ã„åˆã‚ã›</a>
            </nav>
        </div>
    </header>

    <!-- ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="event-detail-hero">
        <div class="container">
            <div class="event-detail-header">
                <h1 id="eventTitle">ã‚¤ãƒ™ãƒ³ãƒˆåèª­ã¿è¾¼ã¿ä¸­...</h1>
                <div class="event-meta">
                    <span class="event-date">
                        <i class="far fa-calendar"></i>
                        <span id="eventDate">-</span>
                    </span>
                    <span class="event-venue">
                        <i class="fas fa-map-marker-alt"></i>
                        <span id="eventVenue">-</span>
                    </span>
                </div>
            </div>
        </div>
    </section>

    <!-- ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section class="event-content-section">
        <div class="container">
            <div class="event-info-column">
                <!-- ã‚¤ãƒ™ãƒ³ãƒˆç”»åƒ -->
                <div class="event-gallery">
                    <img id="eventImage" src="" alt="ã‚¤ãƒ™ãƒ³ãƒˆç”»åƒ" class="main-image">
                </div>
                
                <!-- ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°èª¬æ˜ -->
                <div class="event-description">
                    <h2>ã‚¤ãƒ™ãƒ³ãƒˆæ¦‚è¦</h2>
                    <p id="eventDescription">
                        ãƒ—ãƒ­ã®æ’®å½±ã‚¹ã‚¿ãƒƒãƒ•ãŒã€ã‚ãªãŸã®æœ€é«˜ã®ç¬é–“ã‚’åˆ‡ã‚Šå–ã‚Šã¾ã™ã€‚
                        ã‚¹ã‚¿ã‚¸ã‚ªã§ã®æœ¬æ ¼çš„ãªæ’®å½±ã‹ã‚‰ã€å±‹å¤–ã§ã®ãƒŠãƒãƒ¥ãƒ©ãƒ«ãªæ’®å½±ã¾ã§ã€
                        ãŠå®¢æ§˜ã®ã”è¦æœ›ã«åˆã‚ã›ã¦å¯¾å¿œã„ãŸã—ã¾ã™ã€‚
                    </p>
                    
                    <h3>ä¼šå ´æƒ…å ±</h3>
                    <div class="venue-info">
                        <p id="venueDetails">
                            <strong>ä¼šå ´:</strong> <span id="venueName">-</span><br>
                            <strong>ä½æ‰€:</strong> <span id="venueAddress">-</span><br>
                            <strong>ã‚¢ã‚¯ã‚»ã‚¹:</strong> æœ€å¯„ã‚Šé§…ã‹ã‚‰å¾’æ­©5åˆ†
                        </p>
                    </div>
                    
                    <h3>æ–™é‡‘</h3>
                    <div class="pricing-info">
                        <p>
                            å€‹äººæ’®å½±: Â¥6,000<br>
                            ã‚°ãƒ«ãƒ¼ãƒ—æ’®å½±: Â¥4,800<br>
                            VIPæ’®å½±: Â¥12,000
                        </p>
                    </div>
                    
                    <h3>æ³¨æ„äº‹é …</h3>
                    <ul class="notice-list">
                        <li>æ’®å½±ã®10åˆ†å‰ã¾ã§ã«ãŠè¶Šã—ãã ã•ã„</li>
                        <li>ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯3æ—¥å‰ã¾ã§ç„¡æ–™ã§ã™</li>
                        <li>å¤©å€™ã«ã‚ˆã‚Šå±‹å¤–æ’®å½±ãŒä¸­æ­¢ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- äºˆç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ç‰ˆï¼‰ -->
    <section class="reservation-section">
        <div class="reservation-container">
            <div class="reservation-card">
                <h2>ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ ã™ã‚‹</h2>
                
                <!-- æ®‹å¸­çŠ¶æ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ -->
                <div class="availability-status" id="availabilityStatus" style="display:none;">
                    <span>æ®‹å¸­çŠ¶æ³: </span>
                    <span class="status-count">æ®‹ã‚Š<strong id="remainingSlots">-</strong>å¸­</span>
                </div>
                
                <p>
                    ä¸‹è¨˜ã®ãƒœã‚¿ãƒ³ã‹ã‚‰äºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€<br>
                    å¿…è¦äº‹é …ã‚’ã”å…¥åŠ›ãã ã•ã„ã€‚
                </p>
                
                <!-- Googleãƒ•ã‚©ãƒ¼ãƒ ã¸ã®ãƒªãƒ³ã‚¯ãƒœã‚¿ãƒ³ -->
                <a href="YOUR_GOOGLE_FORM_URL" 
                   target="_blank" 
                   class="btn-google-form"
                   id="reservationButton">
                    <i class="fas fa-external-link-alt"></i>
                    å‚åŠ äºˆç´„ã¯ã“ã¡ã‚‰
                </a>
            </div>
        </div>
    </section>

    <!-- é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆ -->
    <section class="related-events">
        <div class="container">
            <h2>ä»–ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚‚ãƒã‚§ãƒƒã‚¯</h2>
            <div class="events-grid" id="relatedEvents">
                <!-- é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="site-footer">
        <div class="container">
            <p>&copy; 2024 PhotoSession Connect. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã¨è¡¨ç¤ºï¼ˆç°¡ç•¥ç‰ˆï¼‰
        class EventDetailPage {
            constructor() {
                this.eventData = null;
                this.init();
            }
            
            async init() {
                await this.loadEventData();
                this.setupGoogleFormLink();
                this.loadRelatedEvents();
            }
            
            async loadEventData() {
                try {
                    const urlParams = new URLSearchParams(window.location.search);
                    const eventId = urlParams.get('id') || 'EVT001';
                    
                    const response = await fetch('data/events.json');
                    const data = await response.json();
                    const events = data.events || data;
                    
                    this.eventData = events.find(event => event.event_id === eventId);
                    
                    if (this.eventData) {
                        this.displayEventInfo();
                    }
                } catch (error) {
                    console.error('ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                }
            }
            
            displayEventInfo() {
                // ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã®è¡¨ç¤º
                document.getElementById('eventTitle').textContent = this.eventData.event_name || 'ã‚¤ãƒ™ãƒ³ãƒˆå';
                document.getElementById('eventDate').textContent = this.formatDate(this.eventData.event_date);
                document.getElementById('eventVenue').textContent = this.eventData.venue?.venue_name || 'ä¼šå ´æœªå®š';
                document.getElementById('venueName').textContent = this.eventData.venue?.venue_name || 'ä¼šå ´æœªå®š';
                document.getElementById('venueAddress').textContent = this.eventData.venue?.address || 'ä½æ‰€æœªå®š';
                
                if (this.eventData.description) {
                    document.getElementById('eventDescription').textContent = this.eventData.description;
                }
                
                // æ®‹å¸­çŠ¶æ³ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã®ã¿è¡¨ç¤ºï¼‰
                if (this.eventData.remaining_slots !== null && this.eventData.remaining_slots !== undefined) {
                    document.getElementById('availabilityStatus').style.display = 'block';
                    document.getElementById('remainingSlots').textContent = this.eventData.remaining_slots;
                }
                
                // ç”»åƒ
                const eventImage = document.getElementById('eventImage');
                if (eventImage) {
                    eventImage.src = this.eventData.thumbnail_image || 'images/events/default.jpg';
                    eventImage.onerror = function() {
                        this.style.display = 'none';
                        this.parentElement.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                        this.parentElement.style.height = '300px';
                        this.parentElement.style.display = 'flex';
                        this.parentElement.style.alignItems = 'center';
                        this.parentElement.style.justifyContent = 'center';
                        this.parentElement.innerHTML = '<span style="font-size: 48px;">ğŸ“¸</span>';
                    };
                }
                
                document.title = `${this.eventData.event_name} | PhotoSession Connect`;
            }
            
            formatDate(dateString) {
                if (!dateString) return 'æ—¥ç¨‹æœªå®š';
                const date = new Date(dateString);
                const year = date.getFullYear();
                const month = date.getMonth() + 1;
                const day = date.getDate();
                const weekDays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
                const weekDay = weekDays[date.getDay()];
                return `${year}å¹´${month}æœˆ${day}æ—¥(${weekDay})`;
            }
            
            setupGoogleFormLink() {
                // Googleãƒ•ã‚©ãƒ¼ãƒ ã®URLã‚’è¨­å®š
                // ã“ã“ã«ã‚ãªãŸã®Googleãƒ•ã‚©ãƒ¼ãƒ URLã‚’è¨­å®šã—ã¦ãã ã•ã„
                const GOOGLE_FORM_URL = 'https://docs.google.com/forms/d/e/YOUR_FORM_ID/viewform';
                
                const button = document.getElementById('reservationButton');
                if (button) {
                    // ã‚¤ãƒ™ãƒ³ãƒˆåã‚’äº‹å‰å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦è¿½åŠ ã™ã‚‹å ´åˆ
                    // const formUrl = GOOGLE_FORM_URL + '?entry.123456789=' + encodeURIComponent(this.eventData?.event_name || '');
                    // button.href = formUrl;
                    
                    button.href = GOOGLE_FORM_URL;
                }
            }
            
            async loadRelatedEvents() {
                try {
                    const response = await fetch('data/events.json');
                    const data = await response.json();
                    const events = data.events || data;
                    
                    const relatedEvents = events
                        .filter(event => event.event_id !== this.eventData?.event_id)
                        .slice(0, 3);
                    
                    const relatedEventsContainer = document.getElementById('relatedEvents');
                    if (relatedEventsContainer && relatedEvents.length > 0) {
                        relatedEventsContainer.innerHTML = relatedEvents
                            .map(event => this.createEventCard(event))
                            .join('');
                    }
                } catch (error) {
                    console.error('é–¢é€£ã‚¤ãƒ™ãƒ³ãƒˆã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                }
            }
            
            createEventCard(event) {
                const eventDate = new Date(event.event_date);
                const formattedDate = `${eventDate.getMonth() + 1}/${eventDate.getDate()}`;
                
                return `
                    <div class="event-card">
                        <div class="event-image">
                            <img src="${event.thumbnail_image || 'images/events/default.jpg'}" 
                                 alt="${event.event_name}"
                                 onerror="this.style.display='none'; this.parentElement.classList.add('no-image');">
                        </div>
                        <div class="event-content">
                            <h3 class="event-title">${event.event_name}</h3>
                            <div class="event-info">
                                <span class="event-date">
                                    <i class="far fa-calendar"></i> ${formattedDate}
                                </span>
                            </div>
                            <a href="event-detail.html?id=${event.event_id}" class="btn-view-detail">
                                è©³ç´°ã‚’è¦‹ã‚‹
                            </a>
                        </div>
                    </div>
                `;
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            new EventDetailPage();
        });
    </script>
</body>
</html>